<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Visual Schedule with IEP Logging</title>
    <style>
        body {
            margin: 0;
            padding: 10px;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
            background-color: #f0f0f0;
            color: #333;
        }
        .container {
            max-width: 600px;
            margin: 0 auto;
            background-color: #fff;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1, h2 {
            text-align: center;
            color: #0892fc;
        }
        label, button, select, textarea {
            display: block;
            width: 100%;
            margin: 10px 0;
        }
        button {
            background-color: #0892fc;
            color: #fff;
            padding: 10px;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #0775d1;
        }
        textarea {
            resize: none;
            padding: 10px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            padding: 10px;
            border: 1px solid #ccc;
        }
    </style>
</head>
<body>

<div class="container">
    <h1>IEP Visual Schedule Log</h1>

    <label for="goal-select">Select IEP Goal:</label>
    <select id="goal-select">
        <option value="goal1">Annual Goal #1</option>
        <option value="goal2">Annual Goal #2</option>
    </select>

    <label for="activity-select">Choose the correct activity:</label>
    <select id="activity-select">
        <option value="lifeskills">Lifeskills</option>
        <option value="math">Math</option>
        <option value="english">English</option>
        <option value="science">Science</option>
        <option value="physed">Phys Ed</option>
        <option value="health">Health</option>
        <option value="bus">Bus</option>
    </select>

    <label for="independence-select">Did the student act independently?</label>
    <select id="independence-select">
        <option value="yes">Yes</option>
        <option value="no">No</option>
    </select>

    <label for="comments">Comments:</label>
    <textarea id="comments" placeholder="Enter any comments..."></textarea>

    <button id="save-session">Save Session</button>

    <h2>Session Log</h2>
    <table id="log-table">
        <thead>
            <tr>
                <th>Date</th>
                <th>Time</th>
                <th>Goal</th>
                <th>Activity</th>
                <th>Independence</th>
                <th>Comments</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

    <button id="export-csv">Export to CSV</button>
    <button id="export-txt">Export to TXT</button>
    <button id="clear-log">Clear Log</button>
</div>

<script>
    const logTableBody = document.querySelector('#log-table tbody');
    let logEntries = JSON.parse(localStorage.getItem('logEntries')) || [];

    // Add session data to the log
    document.getElementById('save-session').addEventListener('click', function () {
        const goal = document.getElementById('goal-select').value;
        const activity = document.getElementById('activity-select').value;
        const independence = document.getElementById('independence-select').value;
        const comments = document.getElementById('comments').value.trim() || 'None';

        const now = new Date();
        const date = now.toLocaleDateString();
        const time = now.toLocaleTimeString();

        const logEntry = { date, time, goal, activity, independence, comments };
        logEntries.push(logEntry);
        localStorage.setItem('logEntries', JSON.stringify(logEntries));
        renderLog();
    });

    // Render the log in the table
    function renderLog() {
        logTableBody.innerHTML = '';
        logEntries.forEach((entry, index) => {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${entry.date}</td>
                <td>${entry.time}</td>
                <td>${entry.goal}</td>
                <td>${entry.activity}</td>
                <td>${entry.independence}</td>
                <td>${entry.comments}</td>
            `;
            logTableBody.appendChild(row);
        });
    }

    // Export to CSV
    document.getElementById('export-csv').addEventListener('click', function () {
        let csvContent = "data:text/csv;charset=utf-8,Date,Time,Goal,Activity,Independence,Comments\n";
        logEntries.forEach(entry => {
            csvContent += `${entry.date},${entry.time},${entry.goal},${entry.activity},${entry.independence},${entry.comments}\n`;
        });

        const encodedUri = encodeURI(csvContent);
        const link = document.createElement('a');
        link.setAttribute('href', encodedUri);
        link.setAttribute('download', 'IEP_Visual_Schedule_Log.csv');
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);
    });

    // Export to TXT
    document.getElementById('export-txt').addEventListener('click', function () {
        let txtContent = "IEP Visual Schedule Log\n\n";
        logEntries.forEach(entry => {
            txtContent += `Date: ${entry.date}\nTime: ${entry.time}\nGoal: ${entry.goal}\nActivity: ${entry.activity}\nIndependence: ${entry.independence}\nComments: ${entry.comments}\n\n`;
        });

        const blob = new Blob([txtContent], { type: 'text/plain' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = 'IEP_Visual_Schedule_Log.txt';
        link.click();
    });

    // Clear log
    document.getElementById('clear-log').addEventListener('click', function () {
        if (confirm('Are you sure you want to clear the log?')) {
            logEntries = [];
            localStorage.setItem('logEntries', JSON.stringify(logEntries));
            renderLog();
        }
    });

    // Load log on page load
    renderLog();
</script>

</body>
</html>
